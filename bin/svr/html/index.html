<html>
	<head>
		<script type="text/javascript">
			function $() {
				return document.getElementById(arguments[0]);
			}

			function setJsonValue(kind) {
				var price = $("price");
				var amount = $("amount");
				var stockId = $("stockId");
				var jsonValue = $("jsonValue");
				var obj = new Object();
				obj.kind = kind;
				obj.price = price.value * 1;
				obj.amount = amount.value * 1;
				obj.stockId = stockId.value * 1;
				console.log(JSON.stringify(obj));
				ws.send(JSON.stringify(obj));
			}

			function doWebsocket() {
				ws = new WebSocket("ws://localhost:8081/test");
				ws.onopen = function() {
					console.log("open");
				}
				ws.onmessage = function(m) {
					console.log(m.data)
				}
				ws.onclose = function() {
					console.log("closed");
				}
			}
		</script>
	</head>

	<body onload="doWebsocket()">
		<form name="buy-form" action="http://localhost:8081/buy" method="get">
			Price: <input type="text" name="price" id="price"></input><br/>
			Amount: <input type="text" name="amount" id="amount"></input><br/>
			StockId: <input type="text" name="stockId" id="stockId"></input><br/>
		</form>
		<button onClick="setJsonValue('BUY')">BUY</button>
		<button onClick="setJsonValue('SELL')">SELL</button>

	</body>

</html>
