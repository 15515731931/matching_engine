<html>
	<head>
		<script type="text/javascript">
			function $() {
				return document.getElementById(arguments[0]);
			}

			function Order(kind, price, amount, stockId, tradeId) {
				this.kind = kind;
				this.price = price;
				this.amount = amount;
				this.stockId = stockId;
				this.tradeId = tradeId;
			}

			function setJsonValue(kind) {
				var obj = new Object();
				var price = Number($("price").value);
				var amount = Number($("amount").value);
				var stockId = Number($("stockId").value);
				var order = new Order(kind, price, amount, stockId);
				console.log("  To: " + JSON.stringify(order));
				ws.send(JSON.stringify(order));
			}

			function doWebsocket() {
				ws = new WebSocket("ws://localhost:8081/wsconn");
				ws.onopen = function() {
					console.log("open");
				}
				ws.onmessage = function(m) {
				console.log("From: " + m.data)
				}
				ws.onclose = function() {
					console.log("closed");
				}
			}
		</script>
	</head>

	<body onload="doWebsocket()">
		<form name="buy-form" action="http://localhost:8081/buy" method="get">
			Price: <input type="text" name="price" id="price"></input><br/>
			Amount: <input type="text" name="amount" id="amount"></input><br/>
			StockId: <input type="text" name="stockId" id="stockId"></input><br/>
		</form>
		<button onClick="setJsonValue('BUY')">BUY</button>
		<button onClick="setJsonValue('SELL')">SELL</button>

	</body>

</html>
